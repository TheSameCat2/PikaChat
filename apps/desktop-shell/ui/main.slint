import { AboutSlint, Button } from "std-widgets.slint";

export component MainWindow inherits Window {
    title: "PikaChat";
    width: 1024px;
    height: 720px;

    callback quit-requested();
    callback about-slint-requested();

    in-out property<bool> show-about-screen: false;

    menu_bar := MenuBar {
        Menu {
            title: "File";
            MenuItem {
                title: "Quit";
                activated => {
                    root.quit-requested();
                }
            }
        }

        Menu {
            title: "Help";
            MenuItem {
                title: "About Slint...";
                activated => {
                    root.about-slint-requested();
                }
            }
        }
    }

    Rectangle {
        x: 0;
        y: 0;
        width: parent.width;
        height: parent.height;
        background: #1f2430;

        Text {
            text: "PikaChat Desktop Shell";
            color: #d8dee9;
            font-size: 22px;
            x: (parent.width - self.width) / 2;
            y: (parent.height - self.height) / 2;
        }
    }

    if root.show-about-screen : Rectangle {
        x: 0;
        y: 0;
        width: parent.width;
        height: parent.height;
        background: #00000080;

        TouchArea {
            width: parent.width;
            height: parent.height;
        }

        Rectangle {
            width: 520px;
            height: 280px;
            x: (parent.width - self.width) / 2;
            y: (parent.height - self.height) / 2;
            background: #2e3440;
            border-width: 1px;
            border-color: #4c566a;
            border-radius: 10px;

            AboutSlint {
                x: (parent.width - self.width) / 2;
                y: 24px;
            }

            Button {
                text: "Close";
                width: 100px;
                x: (parent.width - self.width) / 2;
                y: parent.height - self.height - 18px;
                clicked => {
                    root.show-about-screen = false;
                }
            }
        }
    }
}
